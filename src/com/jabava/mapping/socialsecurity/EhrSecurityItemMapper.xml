<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jabava.dao.socialsecurity.EhrSecurityItemMapper" >
  <resultMap id="BaseResultMap" type="com.jabava.pojo.socialsecurity.EhrSecurityItem" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 25 14:34:13 CST 2016.
    -->
    <id column="item_id" property="itemId" jdbcType="BIGINT" />
    <result column="person_id" property="personId" jdbcType="BIGINT" />
    <result column="security_profile_id" property="securityProfileId" jdbcType="BIGINT" />
    <result column="security_type_id" property="securityTypeId" jdbcType="BIGINT" />
    <result column="security_type_category" property="securityTypeCategory" jdbcType="INTEGER" />
    <result column="security_item_code" property="securityItemCode" jdbcType="BIGINT" />
    <result column="security_item_base" property="securityItemBase" jdbcType="DECIMAL" />
    <result column="security_org_base" property="securityOrgBase" jdbcType="DECIMAL" />
    <result column="is_deleted" property="isDeleted" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 25 14:34:13 CST 2016.
    -->
    item_id, person_id, security_profile_id, security_type_id, security_type_category, 
    security_item_code, security_item_base,security_org_base, create_time, is_deleted
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 25 14:34:13 CST 2016.
    -->
    select 
    <include refid="Base_Column_List" />
    from ehr_security_item
    where item_id = #{itemId,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 25 14:34:13 CST 2016.
    -->
    delete from ehr_security_item
    where item_id = #{itemId,jdbcType=BIGINT}
    	${@com.jabava.utils.privilege.AuthorisedPersonUtil@getUserAuthorisedPersonList("person_id")}
  </delete>
  <insert id="insert" parameterType="com.jabava.pojo.socialsecurity.EhrSecurityItem" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 25 14:34:13 CST 2016.
    -->
    insert into ehr_security_item (item_id, person_id, security_profile_id, 
      security_type_id, security_type_category, security_item_code, 
      security_item_base,security_org_base, create_time, is_deleted
      )
    values (#{itemId,jdbcType=BIGINT}, #{personId,jdbcType=BIGINT}, #{securityProfileId,jdbcType=BIGINT}, 
      #{securityTypeId,jdbcType=BIGINT}, #{securityTypeCategory,jdbcType=INTEGER}, #{securityItemCode,jdbcType=BIGINT}, 
      #{securityItemBase,jdbcType=DECIMAL},#{securityOrgBase,jdbcType=DECIMAL}, #{createTime,jdbcType=TIMESTAMP}, #{isDeleted,jdbcType=INTEGER}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.jabava.pojo.socialsecurity.EhrSecurityItem" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 25 14:34:13 CST 2016.
    -->
    insert into ehr_security_item
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="itemId != null" >
        item_id,
      </if>
      <if test="personId != null" >
        person_id,
      </if>
      <if test="securityProfileId != null" >
        security_profile_id,
      </if>
      <if test="securityTypeId != null" >
        security_type_id,
      </if>
      <if test="securityTypeCategory != null" >
        security_type_category,
      </if>
      <if test="securityItemCode != null" >
        security_item_code,
      </if>
      <if test="securityItemBase != null" >
        security_item_base,
      </if>
      <if test="securityOrgBase != null" >
        security_org_base,
      </if>
      
      <if test="createTime != null" >
        create_time,
      </if>
      <if test="isDeleted != null" >
        is_deleted,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="itemId != null" >
        #{itemId,jdbcType=BIGINT},
      </if>
      <if test="personId != null" >
        #{personId,jdbcType=BIGINT},
      </if>
      <if test="securityProfileId != null" >
        #{securityProfileId,jdbcType=BIGINT},
      </if>
      <if test="securityTypeId != null" >
        #{securityTypeId,jdbcType=BIGINT},
      </if>
      <if test="securityTypeCategory != null" >
        #{securityTypeCategory,jdbcType=INTEGER},
      </if>
      <if test="securityItemCode != null" >
        #{securityItemCode,jdbcType=BIGINT},
      </if>
      <if test="securityItemBase != null" >
        #{securityItemBase,jdbcType=DECIMAL},
      </if>
      <if test="securityOrgBase != null" >
        #{securityOrgBase,jdbcType=DECIMAL},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="isDeleted != null" >
        #{isDeleted,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.jabava.pojo.socialsecurity.EhrSecurityItem" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 25 14:34:13 CST 2016.
    -->
    update ehr_security_item
    <set >
      <if test="personId != null" >
        person_id = #{personId,jdbcType=BIGINT},
      </if>
      <if test="securityProfileId != null" >
        security_profile_id = #{securityProfileId,jdbcType=BIGINT},
      </if>
      <if test="securityTypeId != null" >
        security_type_id = #{securityTypeId,jdbcType=BIGINT},
      </if>
      <if test="securityTypeCategory != null" >
        security_type_category = #{securityTypeCategory,jdbcType=INTEGER},
      </if>
      <if test="securityItemCode != null" >
        security_item_code = #{securityItemCode,jdbcType=BIGINT},
      </if>
      <if test="securityItemBase != null" >
        security_item_base = #{securityItemBase,jdbcType=DECIMAL},
      </if>
      <if test="securityOrgBase != null" >
        security_org_base = #{securityOrgBase,jdbcType=DECIMAL},
      </if>
      <if test="createTime != null" >
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="isDeleted != null" >
        is_deleted = #{isDeleted,jdbcType=INTEGER},
      </if>
    </set>
    where item_id = #{itemId,jdbcType=BIGINT}
    	${@com.jabava.utils.privilege.AuthorisedPersonUtil@getUserAuthorisedPersonList("person_id")}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.jabava.pojo.socialsecurity.EhrSecurityItem" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Apr 25 14:34:13 CST 2016.
    -->
    update ehr_security_item
    set person_id = #{personId,jdbcType=BIGINT},
      security_profile_id = #{securityProfileId,jdbcType=BIGINT},
      security_type_id = #{securityTypeId,jdbcType=BIGINT},
      security_type_category = #{securityTypeCategory,jdbcType=INTEGER},
      security_item_code = #{securityItemCode,jdbcType=BIGINT},
      security_item_base = #{securityItemBase,jdbcType=DECIMAL},
      security_org_base = #{securityOrgBase,jdbcType=DECIMAL},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      is_deleted = #{isDeleted,jdbcType=INTEGER}
    where item_id = #{itemId,jdbcType=BIGINT}
    	${@com.jabava.utils.privilege.AuthorisedPersonUtil@getUserAuthorisedPersonList("person_id")}
  </update>

	<!-- 查询员工的社保明细信息 -->
	<select id="selectByPersonId" parameterType="java.lang.Long" resultMap="BaseResultMap">
		select
			<include refid="Base_Column_List" />
		from
			ehr_security_item
		where
			person_id=#{personId,jdbcType=BIGINT}
		and is_deleted = 0
	</select>
	
	<!-- 删除用户下的社保明细信息 -->
	<update id='removeSecurityItemByPersonId' parameterType="java.lang.Long">
		update ehr_security_item set is_deleted = 1 where person_id=#{personId,jdbcType=BIGINT}
			${@com.jabava.utils.privilege.AuthorisedPersonUtil@getUserAuthorisedPersonList("person_id")}
	</update>
	<!-- 批量插入 -->
	<insert id="addBachSecurityItem" parameterType="java.util.List">
		insert into ehr_security_item (person_id, security_profile_id, security_type_id, security_type_category, 
			security_item_code, security_item_base,security_org_base, create_time, is_deleted)
		values
		<foreach collection="list" item="item" index="index" separator=",">
			(#{item.personId},#{item.securityProfileId},#{item.securityTypeId},#{item.securityTypeCategory},
			#{item.securityItemCode},#{item.securityItemBase},#{item.securityOrgBase},#{item.createTime},#{item.isDeleted})
		</foreach>
	</insert>
	
	<!-- 批量逻辑删除 -->
	<update id="deleteBachSecurityItem" parameterType="java.util.List">  
	    update ehr_security_item set is_deleted = 1 where security_profile_id  in  
	    <foreach collection="list" item="item" index="index" open="(" separator="," close=")" >  
	        #{item}  
	    </foreach>  
   </update>
	
</mapper>