<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jabava.dao.employee.EhrPositionMapper" >
  <resultMap id="BaseResultMap" type="com.jabava.pojo.employee.EhrPosition" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="position_id" property="positionId" jdbcType="BIGINT" />
    <result column="person_id" property="personId" jdbcType="BIGINT" />
    <result column="position_name" property="positionName" jdbcType="BIGINT" />
    <result column="employee_number" property="employeeNumber" jdbcType="VARCHAR" />
    <result column="department_id" property="departmentId" jdbcType="BIGINT" />
    <result column="level_id" property="levelId" jdbcType="BIGINT" />
    <result column="key_point" property="keyPoint" jdbcType="INTEGER" />
    <result column="nature_of_labor" property="natureOfLabor" jdbcType="BIGINT" />
    <result column="report_id" property="reportId" jdbcType="BIGINT" />
    <result column="cost_center_id" property="costCenterId" jdbcType="BIGINT" />
    <result column="create_user_id" property="createUserId" jdbcType="BIGINT" />
    <result column="create_date" property="createDate" jdbcType="TIMESTAMP" />
    <result column="update_user_id" property="updateUserId" jdbcType="BIGINT" />
    <result column="update_date" property="updateDate" jdbcType="TIMESTAMP" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="is_deleted" property="isDeleted" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Base_Column_List" >
     position_id, person_id, employee_number, position_name, department_id, level_id, 
    key_point, nature_of_labor, report_id, cost_center_id, create_user_id, create_date, 
    update_user_id, update_date, remark, is_deleted
  </sql>
  
  <resultMap id="PositionResult" type="com.jabava.pojo.employee.EhrPositionVO"  extends="BaseResultMap">
		<association property="reportPerson" column="report_id" javaType="com.jabava.pojo.manage.EhrPerson" resultMap="ReportPersonResultMap"/>
 		<association property="person" column="person_id" javaType="com.jabava.pojo.manage.EhrPerson" resultMap="PersonResultMap"/>
  		<association property="department" column="department_id" javaType="com.jabava.pojo.manage.EhrOrganization" resultMap="OrgResultMap"/>
 
  </resultMap>
  <resultMap id="PersonBaseResultMap" type="com.jabava.pojo.manage.EhrPerson" >
    <!--
      WARNING - @mbggenerated 
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 22 13:34:15 CST 2015.
    -->
    <id column="person_id" property="personId" jdbcType="BIGINT" />
    <result column="company_id" property="companyId" jdbcType="BIGINT" />
    <result column="organization_id" property="organizationId" jdbcType="BIGINT" />
    <result column="post_id" property="postId" jdbcType="BIGINT" />
    <result column="cost_id" property="costId" jdbcType="BIGINT" />
    <result column="job_number" property="jobNumber" jdbcType="VARCHAR" />
    <result column="employee_name" property="employeeName" jdbcType="VARCHAR" />
    <result column="employee_photo" property="employeePhoto" jdbcType="VARCHAR" />
    <result column="employment_type" property="employmentType" jdbcType="VARCHAR" />
    <result column="rank_id" property="rankId" jdbcType="BIGINT" />
    <result column="key_person" property="keyPerson" jdbcType="INTEGER" />
    <result column="sex" property="sex" jdbcType="INTEGER" />
    <result column="report_object" property="reportObject" jdbcType="VARCHAR" />
    <result column="entry_date" property="entryDate" jdbcType="DATE" />
    <result column="positive_date" property="positiveDate" jdbcType="DATE" />
    <result column="in_company_time" property="inCompanyTime" jdbcType="TINYINT" />
    <result column="firstjob_date" property="firstjobDate" jdbcType="DATE" />
    <result column="birth_date" property="birthDate" jdbcType="DATE" />
    <result column="age" property="age" jdbcType="INTEGER" />
    <result column="cert_type" property="certType" jdbcType="TINYINT" />
    <result column="cert_id" property="certId" jdbcType="VARCHAR" /> 
    <result column="bank_name" property="bankName" jdbcType="VARCHAR" />
    <result column="salary_card" property="salaryCard" jdbcType="VARCHAR" />
    <result column="marital" property="marital" jdbcType="INTEGER" />
    <result column="degree" property="degree" jdbcType="VARCHAR" />
    <result column="education" property="education" jdbcType="VARCHAR" />
    <result column="study_abroad" property="studyAbroad" jdbcType="TINYINT" />
    <result column="work_location" property="workLocation" jdbcType="VARCHAR" />
    <result column="payroll_location" property="payrollLocation" jdbcType="VARCHAR" />
    <result column="register_location" property="registerLocation" jdbcType="VARCHAR" />
    <result column="social_security_location" property="socialSecurityLocation" jdbcType="VARCHAR" />
    <result column="register_type" property="registerType" jdbcType="INTEGER" />
    <result column="birth_place" property="birthPlace" jdbcType="VARCHAR" />
    <result column="nationality" property="nationality" jdbcType="VARCHAR" />
    <result column="mobile" property="mobile" jdbcType="VARCHAR" />
    <result column="phone" property="phone" jdbcType="VARCHAR" />
    <result column="Email" property="email" jdbcType="VARCHAR" />
    <result column="contact_address" property="contactAddress" jdbcType="VARCHAR" />
    <result column="family_address" property="familyAddress" jdbcType="VARCHAR" />
    <result column="post_code" property="postCode" jdbcType="VARCHAR" />
    <result column="is_payroll_flag" property="isPayrollFlag" jdbcType="TINYINT" />
    <result column="file_location" property="fileLocation" jdbcType="VARCHAR" />
    <result column="is_foreign" property="isForeign" jdbcType="INTEGER" />
    <result column="left_date" property="leftDate" jdbcType="DATE" />
    <result column="left_cause" property="leftCause" jdbcType="VARCHAR" />
    <result column="expire_date" property="expireDate" jdbcType="DATE" />
    <result column="memo" property="memo" jdbcType="VARCHAR" />
    <result column="create_user_id" property="createUserId" jdbcType="BIGINT" />
    <result column="create_user_name" property="createUserName" jdbcType="VARCHAR" />
    <result column="create_date" property="createDate" jdbcType="TIMESTAMP" />
    <result column="last_modify_user_id" property="lastModifyUserId" jdbcType="BIGINT" />
    <result column="last_modify_user_name" property="lastModifyUserName" jdbcType="VARCHAR" />
    <result column="last_modify_date" property="lastModifyDate" jdbcType="TIMESTAMP" />
    <result column="status" property="status" jdbcType="INTEGER" />
    <result column="employee_group" property="employeeGroup" jdbcType="VARCHAR" />
    <result column="team" property="team" jdbcType="BIGINT" />
    <result column="is_workplace" property="isWorkplace" jdbcType="TINYINT" />
    <result column="resume" property="resume" jdbcType="VARCHAR" />
    <result column="subbank" property="subbank" jdbcType="VARCHAR" />
    <result column="recruit" property="recruit" jdbcType="VARCHAR" />
    <result column="post" property="post" jdbcType="VARCHAR" />
    <result column="org" property="org" jdbcType="VARCHAR" />
    <result column="positiveDate1" property="positiveDate1" jdbcType="VARCHAR" />
    <result column="birthDate1" property="birthDate1" jdbcType="VARCHAR" />
    <result column="origin_place" property="originPlace" jdbcType="VARCHAR" />
    <result column="is_deleted" property="isDeleted" jdbcType="INTEGER" />
    <result column="cert_type_url" property="certTypeUrl" jdbcType="VARCHAR" />
    <result column="resume_url" property="resumeUrl" jdbcType="VARCHAR" />
    <result column="education_url" property="educationUrl" jdbcType="VARCHAR" />
    <result column="residence_url" property="residenceUrl" jdbcType="VARCHAR" />
    <result column="jobpost_url" property="jobpostUrl" jdbcType="VARCHAR" />
    <result column="health_url" property="healthUrl" jdbcType="VARCHAR" />
    <result column="salary_url" property="salaryUrl" jdbcType="VARCHAR" />
  </resultMap>
  <resultMap id="PersonPositionResult" type="com.jabava.pojo.manage.EhrPersonVO"  extends="PersonBaseResultMap">
		<association property="person" column="report_id" javaType="com.jabava.pojo.manage.EhrPerson" resultMap="ReportPersonResultMap"/>
  		<association property="organization" column="report_object" javaType="com.jabava.pojo.manage.EhrOrganization" resultMap="OrgResultMap"/>
     	<association property="bd" column="rank_id" javaType="com.jabava.pojo.manage.EhrBaseData" resultMap="BaseDataResultMap1"/>
        <association property="cd" column="cost_id" javaType="com.jabava.pojo.manage.EhrBaseData" resultMap="BaseDataResultMap2"/>
        <association property="dd" column="employment_type" javaType="com.jabava.pojo.manage.EhrBaseData" resultMap="BaseDataResultMap3"/>
        <association property="ed" column="post_id" javaType="com.jabava.pojo.manage.EhrBaseData" resultMap="BaseDataResultMap4"/>
  </resultMap>
    <!--  -->
   <resultMap id="PersonResultMap" type="com.jabava.pojo.manage.EhrPerson" >
    <!--
      WARNING - @mbggenerated 
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 22 13:34:15 CST 2015.
    -->
    <id column="person_id" property="personId" jdbcType="BIGINT" />
    <result column="company_id" property="companyId" jdbcType="BIGINT" />
    <result column="organization_id" property="organizationId" jdbcType="BIGINT" />
    <result column="post_id" property="postId" jdbcType="BIGINT" />
    <result column="cost_id" property="costId" jdbcType="BIGINT" />
    <result column="job_number" property="jobNumber" jdbcType="VARCHAR" />
    <result column="employee_name" property="employeeName" jdbcType="VARCHAR" />
  </resultMap>
  
  <!-- 汇报人 -->
   <resultMap id="ReportPersonResultMap" type="com.jabava.pojo.manage.EhrPerson" >
    <!--
      WARNING - @mbggenerated 
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 22 13:34:15 CST 2015.
    -->
    <id column="person_id" property="personId" jdbcType="BIGINT" />
    <result column="company_id" property="companyId" jdbcType="BIGINT" />
    <result column="organization_id" property="organizationId" jdbcType="BIGINT" />
    <result column="post_id" property="postId" jdbcType="BIGINT" />
    <result column="cost_id" property="costId" jdbcType="BIGINT" />
    <result column="job_number" property="jobNumber" jdbcType="VARCHAR" />
    <result column="report_name" property="employeeName" jdbcType="VARCHAR" />
  </resultMap>
  <!-- 部门 -->
  	<resultMap id="OrgResultMap" type="com.jabava.pojo.manage.EhrOrganization">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 22 
			13:34:15 CST 2015. -->
		<id column="organization_id" property="organizationId" jdbcType="BIGINT" />
		<result column="company_id" property="companyId" jdbcType="BIGINT" />
		<result column="organization_code" property="organizationCode"
			jdbcType="VARCHAR" />
		<result column="total_organization_code" property="totalOrganizationCode"
			jdbcType="VARCHAR" />
		<result column="organization_name" property="organizationName"
			jdbcType="VARCHAR" />
		<result column="organization_level" property="organizationLevel"
			jdbcType="INTEGER" />
		<result column="parent_id" property="parentId" jdbcType="BIGINT" />
		<result column="memo" property="memo" jdbcType="VARCHAR" />
		<result column="create_user_id" property="createUserId"
			jdbcType="BIGINT" />
		<result column="create_user_name" property="createUserName"
			jdbcType="VARCHAR" />
		<result column="create_date" property="createDate" jdbcType="TIMESTAMP" />
		<result column="last_modify_user_id" property="lastModifyUserId"
			jdbcType="BIGINT" />
		<result column="last_modify_user_name" property="lastModifyUserName"
			jdbcType="VARCHAR" />
		<result column="last_modify_date" property="lastModifyDate"
			jdbcType="TIMESTAMP" />
		<result column="sort" property="sort"
			jdbcType="INTEGER" />
	</resultMap>
	<resultMap id="BaseDataResultMap1" type="com.jabava.pojo.manage.EhrBaseData">
		
		<id column="base_data_id" property="baseDataId" jdbcType="BIGINT" />
		<result column="base_data_type" property="baseDataType"
			jdbcType="INTEGER" />
		<result column="company_id" property="companyId" jdbcType="BIGINT" />
		<result column="base_data_code" property="baseDataCode"
			jdbcType="VARCHAR" />
		<result column="base_data_name1" property="baseDataName"
			jdbcType="VARCHAR" />
		<result column="memo" property="memo" jdbcType="VARCHAR" />
		<result column="is_valid" property="isValid" jdbcType="TINYINT" />
		<result column="valid" property="valid" jdbcType="VARCHAR" />
	</resultMap>
	<resultMap id="BaseDataResultMap2" type="com.jabava.pojo.manage.EhrBaseData">
		
		<id column="base_data_id" property="baseDataId" jdbcType="BIGINT" />
		<result column="base_data_type" property="baseDataType"
			jdbcType="INTEGER" />
		<result column="company_id" property="companyId" jdbcType="BIGINT" />
		<result column="base_data_code" property="baseDataCode"
			jdbcType="VARCHAR" />
		<result column="base_data_name2" property="baseDataName"
			jdbcType="VARCHAR" />
		<result column="memo" property="memo" jdbcType="VARCHAR" />
		<result column="is_valid" property="isValid" jdbcType="TINYINT" />
		<result column="valid" property="valid" jdbcType="VARCHAR" />
	</resultMap>
	<resultMap id="BaseDataResultMap3" type="com.jabava.pojo.manage.EhrBaseData">
		
		<id column="base_data_id" property="baseDataId" jdbcType="BIGINT" />
		<result column="base_data_type" property="baseDataType"
			jdbcType="INTEGER" />
		<result column="company_id" property="companyId" jdbcType="BIGINT" />
		<result column="base_data_code" property="baseDataCode"
			jdbcType="VARCHAR" />
		<result column="base_data_name3" property="baseDataName"
			jdbcType="VARCHAR" />
		<result column="memo" property="memo" jdbcType="VARCHAR" />
		<result column="is_valid" property="isValid" jdbcType="TINYINT" />
		<result column="valid" property="valid" jdbcType="VARCHAR" />
	</resultMap>
	<resultMap id="BaseDataResultMap4" type="com.jabava.pojo.manage.EhrBaseData">
		
		<id column="base_data_id" property="baseDataId" jdbcType="BIGINT" />
		<result column="base_data_type" property="baseDataType"
			jdbcType="INTEGER" />
		<result column="company_id" property="companyId" jdbcType="BIGINT" />
		<result column="base_data_code" property="baseDataCode"
			jdbcType="VARCHAR" />
		<result column="base_data_name4" property="baseDataName"
			jdbcType="VARCHAR" />
		<result column="memo" property="memo" jdbcType="VARCHAR" />
		<result column="is_valid" property="isValid" jdbcType="TINYINT" />
		<result column="valid" property="valid" jdbcType="VARCHAR" />
	</resultMap>
  <!-- 根据personId获取岗位信息 -->
    <select id="selectByPersonId" resultMap="PositionResult" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    ehr_position.*,
    p.job_number as job_number, p.company_id as company_id, r.employee_name as employee_name,
    o.organization_name as organization_name
    from ehr_position
    left join ehr_person p on ehr_position.person_id = p.person_id
    left join ehr_person r on ehr_position.report_id = r.person_id
    left join ehr_organization o on ehr_position.department_id = o.organization_id
    where ehr_position.person_id = #{personId,jdbcType=BIGINT}
    and ehr_position.is_deleted=0
  </select>
  
    <!-- 根据 personId -new 获取岗位信息 -->
    <select id="selectPositionByPersonId" resultMap="PersonPositionResult" parameterType="java.lang.Long" >
    
		  <!--   SELECT
		    person.person_id,
			person.post_id , 
		  ed.base_data_name as base_data_name4, 
			person.organization_id, 
			o.organization_name, 
			person.cost_id, 
		  cd.base_data_name as base_data_name2,
		  person.employment_type,  
		  dd.base_data_name as base_data_name3,
			person.key_person,  
		   person.rank_id, 
		    bd.base_data_name as base_data_name1, 
		   person.job_number ,
		   person.report_object,
           r.employee_name as report_name
   		   
		FROM
			ehr_person person
		LEFT JOIN ehr_person r ON person.report_object = r.person_id
		LEFT JOIN ehr_organization o ON person.organization_id = o.organization_id
		LEFT JOIN ehr_base_data bd on person.rank_id = bd.base_data_id
		LEFT JOIN ehr_base_data cd on person.cost_id = bd.base_data_id
		LEFT JOIN ehr_base_data dd on person.employment_type = bd.base_data_id
		LEFT JOIN ehr_base_data ed on person.post_id = bd.base_data_id
		WHERE
		person.is_deleted=0 and 
			person.person_id =  #{personId,jdbcType=BIGINT} -->
			
		  SELECT

		      person.person_id,
			  person.post_id , 
			  person.organization_id, 
			  o.organization_name, 
			  person.key_person,  
			  person.rank_id, 
			  person.job_number ,
			  person.report_object,
			  r.employee_name as report_name,
			  person.cost_id,
			  person.employment_type ,
			  person.work_location
   		   
		FROM
			ehr_person person
			LEFT JOIN ehr_person r ON person.report_object = r.person_id
			LEFT JOIN ehr_organization o ON person.organization_id = o.organization_id
		WHERE
			person.is_deleted=0 and 
			person.person_id =  #{personId,jdbcType=BIGINT}
  </select>
  <!-- 根据公司ID和员工ID查询岗位 -->
  <select id="getPositionByPersonIdAndCompanyId" resultMap="BaseResultMap" parameterType="com.jabava.pojo.manage.EhrPerson">
  SELECT
	ehr_position.*
	FROM
	ehr_position
	LEFT JOIN ehr_person p ON ehr_position.person_id = p.person_id
	WHERE
	ehr_position.person_id = #{personId,jdbcType=BIGINT}
	AND ehr_position.is_deleted = 0
	AND p.company_id = #{companyId,jdbcType=BIGINT}
  </select>
  
    <!-- 根据公司ID和工号查询岗位 -->
  <select id="getPositionByEmployeeNumberAndCompanyId" resultMap="PersonBaseResultMap" parameterType="com.jabava.pojo.manage.EhrPerson">
  SELECT
	person.*
	FROM
	ehr_person person
	WHERE
	 person.is_deleted = 0
	AND person.company_id = #{companyId,jdbcType=BIGINT}
	AND person.job_number = #{jobNumber,jdbcType=VARCHAR}
	
  </select>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from ehr_position
    where position_id = #{positionId,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from ehr_position
    where position_id = #{positionId,jdbcType=BIGINT}
    	${@com.jabava.utils.privilege.AuthorisedPersonUtil@getUserAuthorisedPersonList("person_id")}
  </delete>
  <insert id="insert" parameterType="com.jabava.pojo.employee.EhrPosition" >
     insert into ehr_position (position_id, person_id, employee_number, 
      position_name, department_id, level_id, 
      key_point, nature_of_labor, report_id, 
      cost_center_id, create_user_id, create_date, 
      update_user_id, update_date, remark, 
      is_deleted)
    values (#{positionId,jdbcType=BIGINT}, #{personId,jdbcType=BIGINT}, #{employeeNumber,jdbcType=VARCHAR}, 
      #{positionName,jdbcType=BIGINT}, #{departmentId,jdbcType=BIGINT}, #{levelId,jdbcType=BIGINT}, 
      #{keyPoint,jdbcType=INTEGER}, #{natureOfLabor,jdbcType=BIGINT}, #{reportId,jdbcType=BIGINT}, 
      #{costCenterId,jdbcType=BIGINT}, #{createUserId,jdbcType=BIGINT}, #{createDate,jdbcType=TIMESTAMP}, 
      #{updateUserId,jdbcType=BIGINT}, #{updateDate,jdbcType=TIMESTAMP}, #{remark,jdbcType=VARCHAR}, 
      #{isDeleted,jdbcType=INTEGER})
  </insert>
  <insert id="insertSelective" parameterType="com.jabava.pojo.employee.EhrPosition" >
     <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into ehr_position
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="positionId != null" >
        position_id,
      </if>      
      <if test="personId != null" >
        person_id,
      </if>
       <if test="employeeNumber != null" >
        employee_number,
      </if>
      <if test="positionName != null" >
        position_name,
      </if>
      <if test="departmentId != null" >
        department_id,
      </if>
      <if test="levelId != null" >
        level_id,
      </if>
      <if test="keyPoint != null" >
        key_point,
      </if>
      <if test="natureOfLabor != null" >
        nature_of_labor,
      </if>
      <if test="reportId != null" >
        report_id,
      </if>
      <if test="costCenterId != null" >
        cost_center_id,
      </if>
      <if test="createUserId != null" >
        create_user_id,
      </if>
      <if test="createDate != null" >
        create_date,
      </if>
      <if test="updateUserId != null" >
        update_user_id,
      </if>
      <if test="updateDate != null" >
        update_date,
      </if>
      <if test="remark != null" >
        remark,
      </if>
      <if test="isDeleted != null" >
        is_deleted,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="positionId != null" >
        #{positionId,jdbcType=BIGINT},
      </if>
      <if test="personId != null" >
        #{personId,jdbcType=BIGINT},
      </if>
       <if test="employeeNumber != null" >
        #{employeeNumber,jdbcType=VARCHAR},
      </if>
      <if test="positionName != null" >
        #{positionName,jdbcType=BIGINT},
      </if>
      <if test="departmentId != null" >
        #{departmentId,jdbcType=BIGINT},
      </if>
      <if test="levelId != null" >
        #{levelId,jdbcType=BIGINT},
      </if>
      <if test="keyPoint != null" >
        #{keyPoint,jdbcType=INTEGER},
      </if>
      <if test="natureOfLabor != null" >
        #{natureOfLabor,jdbcType=BIGINT},
      </if>
      <if test="reportId != null" >
        #{reportId,jdbcType=BIGINT},
      </if>
      <if test="costCenterId != null" >
        #{costCenterId,jdbcType=BIGINT},
      </if>
      <if test="createUserId != null" >
        #{createUserId,jdbcType=BIGINT},
      </if>
      <if test="createDate != null" >
        #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="updateUserId != null" >
        #{updateUserId,jdbcType=BIGINT},
      </if>
      <if test="updateDate != null" >
        #{updateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="isDeleted != null" >
        #{isDeleted,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.jabava.pojo.employee.EhrPosition" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
     update ehr_position
    <set >
      <if test="personId != null" >
        person_id = #{personId,jdbcType=BIGINT},
      </if>
        <if test="employeeNumber != null" >
        employee_number = #{employeeNumber,jdbcType=VARCHAR},
      </if>
      <if test="positionName != null" >
        position_name = #{positionName,jdbcType=BIGINT},
      </if>
      <if test="departmentId != null" >
        department_id = #{departmentId,jdbcType=BIGINT},
      </if>
      <if test="levelId != null" >
        level_id = #{levelId,jdbcType=BIGINT},
      </if>
      <if test="keyPoint != null" >
        key_point = #{keyPoint,jdbcType=INTEGER},
      </if>
      <if test="natureOfLabor != null" >
        nature_of_labor = #{natureOfLabor,jdbcType=BIGINT},
      </if>
      <if test="reportId != null" >
        report_id = #{reportId,jdbcType=BIGINT},
      </if>
      <if test="costCenterId != null" >
        cost_center_id = #{costCenterId,jdbcType=BIGINT},
      </if>
      <if test="createUserId != null" >
        create_user_id = #{createUserId,jdbcType=BIGINT},
      </if>
      <if test="createDate != null" >
        create_date = #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="updateUserId != null" >
        update_user_id = #{updateUserId,jdbcType=BIGINT},
      </if>
      <if test="updateDate != null" >
        update_date = #{updateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null" >
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="isDeleted != null" >
        is_deleted = #{isDeleted,jdbcType=INTEGER},
      </if>
    </set>
    where position_id = #{positionId,jdbcType=BIGINT}
    	${@com.jabava.utils.privilege.AuthorisedPersonUtil@getUserAuthorisedPersonList("person_id")}
  </update>
  <!-- 根据personId更新 -->
   <update id="updateByPersonId" parameterType="com.jabava.pojo.employee.EhrPosition" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
     update ehr_position
    <set >
      <if test="personId != null" >
        person_id = #{personId,jdbcType=BIGINT},
      </if>
        <if test="employeeNumber != null" >
        employee_number = #{employeeNumber,jdbcType=VARCHAR},
      </if>
      <if test="positionName != null" >
        position_name = #{positionName,jdbcType=BIGINT},
      </if>
      <if test="departmentId != null" >
        department_id = #{departmentId,jdbcType=BIGINT},
      </if>
      <if test="levelId != null" >
        level_id = #{levelId,jdbcType=BIGINT},
      </if>
      <if test="keyPoint != null" >
        key_point = #{keyPoint,jdbcType=INTEGER},
      </if>
      <if test="natureOfLabor != null" >
        nature_of_labor = #{natureOfLabor,jdbcType=BIGINT},
      </if>
      <if test="reportId != null" >
        report_id = #{reportId,jdbcType=BIGINT},
      </if>
      <if test="costCenterId != null" >
        cost_center_id = #{costCenterId,jdbcType=BIGINT},
      </if>
      <if test="createUserId != null" >
        create_user_id = #{createUserId,jdbcType=BIGINT},
      </if>
      <if test="createDate != null" >
        create_date = #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="updateUserId != null" >
        update_user_id = #{updateUserId,jdbcType=BIGINT},
      </if>
      <if test="updateDate != null" >
        update_date = #{updateDate,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null" >
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="isDeleted != null" >
        is_deleted = #{isDeleted,jdbcType=INTEGER},
      </if>
    </set>
    where  person_id = #{personId,jdbcType=BIGINT}
    	${@com.jabava.utils.privilege.AuthorisedPersonUtil@getUserAuthorisedPersonList("person_id")}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.jabava.pojo.employee.EhrPosition" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
     update ehr_position
    set person_id = #{personId,jdbcType=BIGINT},
      employee_number = #{employeeNumber,jdbcType=VARCHAR},
      position_name = #{positionName,jdbcType=BIGINT},
      department_id = #{departmentId,jdbcType=BIGINT},
      level_id = #{levelId,jdbcType=BIGINT},
      key_point = #{keyPoint,jdbcType=INTEGER},
      nature_of_labor = #{natureOfLabor,jdbcType=BIGINT},
      report_id = #{reportId,jdbcType=BIGINT},
      cost_center_id = #{costCenterId,jdbcType=BIGINT},
      create_user_id = #{createUserId,jdbcType=BIGINT},
      create_date = #{createDate,jdbcType=TIMESTAMP},
      update_user_id = #{updateUserId,jdbcType=BIGINT},
      update_date = #{updateDate,jdbcType=TIMESTAMP},
      remark = #{remark,jdbcType=VARCHAR},
      is_deleted = #{isDeleted,jdbcType=INTEGER}
    where position_id = #{positionId,jdbcType=BIGINT}
    	${@com.jabava.utils.privilege.AuthorisedPersonUtil@getUserAuthorisedPersonList("person_id")}
  </update>
</mapper>