<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jabava.dao.manage.EhrSysLogMapper">
	<resultMap id="BaseResultMap" type="com.jabava.pojo.manage.EhrSysLog">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Dec 17 
			09:28:49 CST 2015. -->
		<id column="sys_log_id" property="sysLogId" jdbcType="BIGINT" />
		<result column="user_id" property="userId" jdbcType="BIGINT" />
		<result column="user_name" property="userName" jdbcType="VARCHAR" />
		<result column="company_id" property="companyId" jdbcType="BIGINT" />
		<result column="company_code" property="companyCode" jdbcType="VARCHAR" />
		<result column="company_name" property="companyName" jdbcType="VARCHAR" />
		<result column="operate_info" property="operateInfo" jdbcType="VARCHAR" />
		<result column="operate_date" property="operateDate" jdbcType="TIMESTAMP" />
		<result column="operate_type" property="operateType" jdbcType="INTEGER"/>
		<result column="module" property="module" jdbcType="VARCHAR"/>
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Dec 17 
			09:28:49 CST 2015. -->
		sys_log_id, user_id, user_name, company_id, company_code,
		company_name, operate_info,
		operate_date,operate_type,module 
	</sql>
	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.Long">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Dec 17 
			09:28:49 CST 2015. -->
		select
		<include refid="Base_Column_List" />
		from ehr_sys_log
		where sys_log_id = #{sysLogId,jdbcType=BIGINT}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Dec 17 
			09:28:49 CST 2015. -->
		delete from ehr_sys_log
		where sys_log_id = #{sysLogId,jdbcType=BIGINT}
	</delete>
	<insert id="insert" parameterType="com.jabava.pojo.manage.EhrSysLog">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Dec 17 
			09:28:49 CST 2015. -->
		insert into ehr_sys_log (sys_log_id, user_id, user_name,
		company_id, company_code, company_name,
		operate_info, operate_date,operate_type,module)
		values (#{sysLogId,jdbcType=BIGINT}, #{userId,jdbcType=BIGINT},
		#{userName,jdbcType=VARCHAR},
		#{companyId,jdbcType=BIGINT}, #{companyCode,jdbcType=VARCHAR}, #{companyName,jdbcType=VARCHAR},
		#{operateInfo,jdbcType=VARCHAR}, #{operateDate,jdbcType=TIMESTAMP},
		#{operate_type,jdbcType=INTEGER},#{module,jdbcType=VARCHAR})
	</insert>

	<insert id="insertSelective" parameterType="com.jabava.pojo.manage.EhrSysLog">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Dec 17 
			09:28:49 CST 2015. -->
		insert into ehr_sys_log
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="sysLogId != null">
				sys_log_id,
			</if>
			<if test="userId != null">
				user_id,
			</if>
			<if test="userName != null">
				user_name,
			</if>
			<if test="companyId != null">
				company_id,
			</if>
			<if test="companyCode != null">
				company_code,
			</if>
			<if test="companyName != null">
				company_name,
			</if>
			<if test="operateInfo != null">
				operate_info,
			</if>
			<if test="operateDate != null">
				operate_date,
			</if>
			<if test="operateType != null">
				operate_type,
			</if>
			<if test="module != null" >
				module,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="sysLogId != null">
				#{sysLogId,jdbcType=BIGINT},
			</if>
			<if test="userId != null">
				#{userId,jdbcType=BIGINT},
			</if>
			<if test="userName != null">
				#{userName,jdbcType=VARCHAR},
			</if>
			<if test="companyId != null">
				#{companyId,jdbcType=BIGINT},
			</if>
			<if test="companyCode != null">
				#{companyCode,jdbcType=VARCHAR},
			</if>
			<if test="companyName != null">
				#{companyName,jdbcType=VARCHAR},
			</if>
			<if test="operateInfo != null">
				#{operateInfo,jdbcType=VARCHAR},
			</if>
			<if test="operateDate != null">
				#{operateDate,jdbcType=TIMESTAMP},
			</if>
			<if test="operateType != null">
				#{operateType,jdbcType=INTEGER},
			</if>
			<if test="module != null" >
				#{module,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.jabava.pojo.manage.EhrSysLog">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Dec 17 
			09:28:49 CST 2015. -->
		update ehr_sys_log
		<set>
			<if test="userId != null">
				user_id = #{userId,jdbcType=BIGINT},
			</if>
			<if test="userName != null">
				user_name = #{userName,jdbcType=VARCHAR},
			</if>
			<if test="companyId != null">
				company_id = #{companyId,jdbcType=BIGINT},
			</if>
			<if test="companyCode != null">
				company_code = #{companyCode,jdbcType=VARCHAR},
			</if>
			<if test="companyName != null">
				company_name = #{companyName,jdbcType=VARCHAR},
			</if>
			<if test="operateInfo != null">
				operate_info = #{operateInfo,jdbcType=VARCHAR},
			</if>
			<if test="operateDate != null">
				operate_date = #{operateDate,jdbcType=TIMESTAMP},
			</if>
			<if test="operateType != null">
				operate_type = #{operateType,jdbcType=INTEGER},
			</if>
			<if test="module != null" >
				modules = #{module,jdbcType=VARCHAR},
			</if>
		</set>
		where sys_log_id = #{sysLogId,jdbcType=BIGINT}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.jabava.pojo.manage.EhrSysLog">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Dec 17 
			09:28:49 CST 2015. -->
		update ehr_sys_log
		set user_id = #{userId,jdbcType=BIGINT},
		user_name = #{userName,jdbcType=VARCHAR},
		company_id = #{companyId,jdbcType=BIGINT},
		company_code = #{companyCode,jdbcType=VARCHAR},
		company_name = #{companyName,jdbcType=VARCHAR},
		operate_info = #{operateInfo,jdbcType=VARCHAR},
		operate_date = #{operateDate,jdbcType=TIMESTAMP}
		where sys_log_id = #{sysLogId,jdbcType=BIGINT}
	</update>
	<select id="selectSysLogPage" resultMap="BaseResultMap" parameterType="java.util.Map">
		select <include refid="Base_Column_List" /> from ehr_sys_log where 1=1
		<if test="userName != null and userName !=''">
			and user_name LIKE CONCAT(CONCAT('%', #{userName,jdbcType=VARCHAR}), '%') 
		</if>
		<if test=" startDate !=null and startDate !=''">
			and operate_date &gt;= #{startDate,jdbcType=TIMESTAMP}
		</if>
		<if test=" endDate != null and endDate !=''">
			and ( operate_date - INTERVAL 1 DAY
			)&lt;=#{endDate,jdbcType=TIMESTAMP}
			<!-- and t.operate_date &lt;= #{startDate,jdbcType=VARCHAR} -->
		</if>
		<if test="operateInfo != null and operateInfo!=''">
			and operate_info LIKE CONCAT(CONCAT('%', #{operateInfo,jdbcType=VARCHAR}), '%') 
		</if>
		<if test="companyId != null">
			and company_id = #{companyId,jdbcType=BIGINT}
		</if>
		<if test="search != null and search != ''">
			<if test="isNumeric == 2">
				AND( 
				instr( sys_log_id, #{search,jdbcType=VARCHAR} ) > 0
				OR  user_name like CONCAT(CONCAT('%', #{search, jdbcType=VARCHAR}), '%')
				OR  operate_info like CONCAT(CONCAT('%', #{search, jdbcType=VARCHAR}), '%')
				OR instr( operate_date, #{search,jdbcType=VARCHAR} ) > 0)
			</if>
			<if test="isNumeric == 1">
				AND (  user_name like CONCAT(CONCAT('%', #{search, jdbcType=VARCHAR}), '%')
				OR  operate_info like CONCAT(CONCAT('%', #{search, jdbcType=VARCHAR}), '%'))
			</if>	
		</if>
		<if test="order != null and order != ''">
			order by ${order} 
		</if>
		<if test="according == 'desc' ">
			desc
		</if>
	</select>
	
	<select id="selectByUser" resultMap="BaseResultMap"
		parameterType="java.lang.Long">
		select
		user_id,user_name
		from ehr_user
		where company_id = #{companyId,jdbcType=BIGINT}
	</select>
</mapper>